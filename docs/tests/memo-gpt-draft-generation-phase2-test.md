# GPT下書き生成機能 Phase2 テスト設計書

## テスト概要

**対象機能**: メモ画面GPT下書き生成のモックUI実装（Phase2）  
**テスト目的**: モックUIの正常動作確認とユーザーインタラクションフローの検証  
**テスト環境**: Docker開発環境（localhost:3002）

## テストケース

### TC001: ボタンの有効化/無効化状態
**目的**: 学びの入力有無によるボタン状態制御の確認

**前提条件**: 
- InputFormページ（/input）にアクセス
- 認証済み状態

**テスト手順**:
1. ページを開く
2. 「下書きを生成する」ボタンの状態を確認（無効化されていること）
3. 「5. 今日の学び」フィールドに任意のテキストを入力
4. ボタンの状態が有効化されることを確認
5. 学びフィールドを空にする
6. ボタンが再び無効化されることを確認

**期待結果**: 
- 学び未入力時: ボタン無効（`opacity-50`, `cursor-not-allowed`）
- 学び入力時: ボタン有効（紫のグラデーション表示）

### TC002: モック下書き生成の正常フロー（学びのみ）
**目的**: 学びのみ入力時の下書き生成動作確認

**前提条件**: 
- TC001が成功している
- 「明日の小さなアクション」は空のまま

**テスト手順**:
1. 「1. 読んだ本のタイトル」に「テスト書籍」を入力
2. 「5. 今日の学び」に「テストで学んだ内容」を入力
3. 「下書きを生成する」ボタンをクリック
4. ローディング状態（約2秒間）の表示を確認
5. 生成完了後の表示を確認

**期待結果**: 
- ローディング中: スピナーアイコンと「下書きを生成中...」表示
- 完了後: 「9-1. 今日の学び・気づき by GPT」エリアのみ表示（緑色背景）
- 「9-2. 明日の小さなアクション by GPT」エリアは表示されない

### TC003: モック下書き生成の正常フロー（学び + アクション）
**目的**: 学びとアクション両方入力時の下書き生成動作確認

**前提条件**: 
- TC001が成功している

**テスト手順**:
1. 「1. 読んだ本のタイトル」に「テスト書籍」を入力
2. 「5. 今日の学び」に「テストで学んだ内容」を入力  
3. 「6. 明日の小さなアクション」に「テストアクション」を入力
4. 「下書きを生成する」ボタンをクリック
5. ローディング状態（約2秒間）の表示を確認
6. 生成完了後の表示を確認

**期待結果**: 
- ローディング中: スピナーアイコンと「下書きを生成中...」表示
- 完了後: 両方のエリアが表示
  - 「9-1. 今日の学び・気づき by GPT」（緑色背景）
  - 「9-2. 明日の小さなアクション by GPT」（青色背景）

### TC004: モックデータ内容の確認
**目的**: 生成されるモックデータの妥当性確認

**前提条件**: 
- TC003が成功している

**テスト手順**:
1. 「今日の学び・気づき by GPT」エリアの内容を確認
2. 入力した書籍タイトルが反映されていることを確認
3. 構造化された内容（3つの洞察など）が表示されることを確認
4. 「明日の小さなアクション by GPT」エリアの内容を確認
5. 入力したアクションが引用されていることを確認

**期待結果**: 
- 学びエリア: 書籍名が正しく表示（「【テスト書籍からの学びと気づき】」）
- 学びエリア: 構造化された内容（実践的価値、継続的成長、応用可能性）
- アクションエリア: 入力したアクションの引用（「テストアクション」）
- アクションエリア: 具体的実行プランの提示

### TC005: テキストエリアの読み取り専用状態
**目的**: 生成されたテキストエリアが編集不可であることの確認

**前提条件**: 
- TC003が成功している

**テスト手順**:
1. 「今日の学び・気づき by GPT」エリアをクリック
2. テキスト選択は可能だが編集不可であることを確認
3. 「明日の小さなアクション by GPT」エリアをクリック
4. テキスト選択は可能だが編集不可であることを確認

**期待結果**: 
- 両テキストエリアともreadOnly属性により編集不可
- テキスト選択・コピーは可能
- 背景色により種類が識別可能（緑/青）

### TC006: エラーハンドリング
**目的**: 学び未入力時のボタン無効化動作の確認

**前提条件**: 
- InputFormページにアクセス済み

**テスト手順**:
1. ページを開く
2. 「5. 今日の学び」フィールドが空の状態を確認
3. 「下書きを生成する」ボタンの状態を確認
4. ボタンが無効化されており、クリックできないことを確認
5. ボタンの視覚的スタイル（グレーアウト、カーソル）を確認

**期待結果**: 
- ボタンが `disabled` 状態でクリック不可
- `opacity-50` と `cursor-not-allowed` スタイルが適用
- 学びが未入力の間は一切操作できない状態

### TC007: 複数回の生成動作
**目的**: 同一セッションでの複数回生成の動作確認

**前提条件**: 
- TC003が成功している

**テスト手順**:
1. 最初の下書き生成完了状態から開始
2. 学びの内容を変更（例：「新しい学び内容」）
3. 再度「下書きを生成する」ボタンをクリック
4. 新しい下書きが生成されることを確認
5. 前回のデータが上書きされることを確認

**期待結果**: 
- 新しいモックデータで既存のテキストエリアが更新される
- 書籍名が新しい内容に反映される
- アクションの有無に応じたエリア表示の再判定

### TC008: レスポンシブデザイン確認
**目的**: モバイル環境での表示確認

**前提条件**: 
- TC003が成功している

**テスト手順**:
1. ブラウザのデベロッパーツールでモバイル表示に切り替え（iPhone 12 Pro）
2. 下書きエリアの表示を確認
3. テキストエリアが適切にリサイズされることを確認
4. ボタンが押しやすいサイズで表示されることを確認

**期待結果**: 
- テキストエリアの幅が画面に適応
- ボタンが十分なタップ領域を持つ
- 文字サイズが読みやすい

## 実行チェックリスト

- [x] TC001: ボタンの有効化/無効化状態
- [x] TC002: モック下書き生成の正常フロー（学びのみ）
- [x] TC003: モック下書き生成の正常フロー（学び + アクション）
- [x] TC004: モックデータ内容の確認
- [x] TC005: テキストエリアの読み取り専用状態
- [x] TC006: エラーハンドリング
- [x] TC007: 複数回の生成動作
- [x] TC008: レスポンシブデザイン確認

## 注意事項

1. **テスト環境**: Docker環境で `docker compose -f docker-compose.dev.yml up -d` が実行済みであること
2. **認証状態**: テストユーザーでログイン済みであること
3. **ブラウザ**: Chrome最新版での実行を推奨
4. **ネットワーク**: ローカル環境（localhost:3002）での実行

## 合格基準

全てのテストケース（TC001-TC008）が期待結果通りに動作すること。
1つでも不合格の場合は実装の修正が必要。
